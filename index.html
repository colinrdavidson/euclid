<!-- 
State of the Union:
-the files Point.js, Line.js, and Circle.js exist in the js folder
-test.html supports Oxford commas
-for now, objects placed at the beginning of the game shall be green, goals
  shall be red, and intermediates shall be blue
-test.html will steal from canvas.html until its superiority is recognized, then it
  will erase any trace of the former canvas.html

Next Steps:
-build a basic UI to allow user to create lines, cirlces
-automatically compute all intersections and create points for them whenever a
new line or cirlce object is created
-decide on a good data structure to allow the previous to be simple/efficient
-->

<html>
  <head>
    <script type="text/javascript"  src="http://code.jquery.com/jquery-latest.js"> </script>
    <script type="text/javascript"  src="js/Point.js"> </script>
    <script type="text/javascript"  src="js/Line.js"> </script>
    <script type="text/javascript"  src="js/Circle.js"> </script>
    <script type="text/javascript"  src="js/drawHighlighted.js"> </script>
    <script type="text/javascript"  src="js/buttonFunctions.js"> </script>
    <script type="text/javascript"  src="js/mouseFunctions.js"> </script>
    <script type="text/javascript"  src="js/helperFunctions.js"> </script>

    <style type="text/css">
      #canvasDiv{
        width:400; 
        height:400;
        border:black 1px solid;
      }
      
      #initial{
        z-index:1;
        position:absolute;
      }
      
      #drawn{
        z-index:2;
        position:absolute;
      }
      
      #current{
        z-index:3;
        position:absolute;
      }
      
      #highlighted{
        z-index:4;
        position:absolute;
      }
      
      #user{
        z-index:5;
        position:absolute;
      }

      #buttonDiv{
        height:30px; 
        width:400px; 
        border:black 1px solid;
        display:table-cell;
        vertical-align:middle;
        text-align:center;
      }
      
      #messageDiv{
        height:30px; 
        width:400px; 
        border:black 1px solid;
        display:table-cell;
        vertical-align:middle;
        text-align:center;
      }
    </style>

    <script>

      function init(){
        var canvasInitial = $("#initial")[0];
        var ctxInitial = canvasInitial.getContext("2d");

        var canvasDrawn = $("#drawn")[0];
        var ctxDrawn = canvasDrawn.getContext("2d");

        var canvasCurrent = $("#current")[0];
        var ctxCurrent = canvasCurrent.getContext("2d");

        var canvasHighlighted = $("#highlighted")[0];
        var ctxHighlighted = canvasHighlighted.getContext("2d");

        var canvasUser = $("#user")[0];
        var ctxUser = canvasUser.getContext("2d");
        //All mouse events occur on user layer as it is on top

        //Offset so we can compute location on canvas form location on screen
        var offsetTop = canvasInitial.offsetTop;
        var offsetLeft = canvasInitial.offsetLeft;

        //Arrays
        var pointArray = [];
        var lineArray = [];
        var circleArray = [];

        var intersectionPoints = [];

        //Special Points
        var mouseOverPoint = null; 
        var currentPoint1 = null;
        var currentPoint2 = null;
        
        //test points
        var point1 = new Point(ctxInitial, 100, 200);
        var point2 = new Point(ctxInitial, 300, 200);
        var point3 = new Point(ctxInitial, 200, 100);
        var point4 = new Point(ctxInitial, 200, 300);
        pointArray.push(point1, point2, point3, point4);

        var testPoint = new Point(ctxInitial, 100, 200);
        var testPoint1 = new Point(ctxInitial, 300, 100);

        console.log(testPoint.isInArray(pointArray));
        console.log(testPoint1.isInArray(pointArray));

        //Button Events
        $("#startButton").click(function() { 
          console.log("clicked start"); clickStart(pointArray); 
        });

        $("#lineButton").click(function() { 
          console.log("clicked line"); clickLine(ctxDrawn, currentPoint1, currentPoint2,pointArray, lineArray, circleArray, intersectionPoints); 
        });
        
        $("#circleButton").click(function() { 
          console.log("clicked circle"); clickCircle(ctxDrawn, currentPoint1, currentPoint2, circleArray); 
        });

        //Mouse Events
        $("#user").mousemove(function(e) { 
          mouseOverPoint = mouseMove(ctxHighlighted, pointArray, e.pageX - offsetLeft, e.pageY - offsetTop);
          drawHighlighted(ctxHighlighted, mouseOverPoint);
        });

        $("#user").mousedown(function(e) {
          if (mouseOverPoint){
            var clickedPoints = clickCanvas(ctxCurrent, pointArray, lineArray, circleArray,  mouseOverPoint, currentPoint1, currentPoint2);
            currentPoint1 = clickedPoints[0];
            currentPoint2 = clickedPoints[1];
            
            ctxCurrent.clearRect(0,0,400,400);
            if (currentPoint1) currentPoint1.draw("#00FF00");
            if (currentPoint2) currentPoint2.draw("#FF0000");
          }
        });
      }
    </script>

  </head>
  <body onload="init();">
    <!--make a few divs for canvas, buttons, messages-->
    <div id="everythingDiv">

      <div id="canvasDiv" >
        <canvas id="initial" width="400" height="400"></canvas>
        <canvas id="drawn" width="400" height="400"></canvas>
        <canvas id="current" width="400" height="400"></canvas>
        <canvas id="highlighted" width="400" height="400"></canvas>
        <canvas id="user" width="400" height="400"></canvas>
      </div>
      <br>
      <div id="buttonDiv"> 
        <button id="startButton"> Start </button>
        <button id="lineButton"> Line </button>
        <button id="circleButton"> Circle </button>
      </div>
      <br>
      <div id = "messageDiv">
        This is where messages would go
      </div>
    </div>

  </body>
</htmlrequesting tickets for 4170799 426{>
