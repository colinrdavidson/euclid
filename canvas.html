<!--
Notes:

Initial code.

This code is super shitty and needs to be completely refactored at some point, this was just made for the purposes of messing around with canvas.

A "level" can be just a series of points and then drawing instructions.

Also need to think about how to create goals, flashing achievment points?

Need to figure out a way of checking with a line or circle intersects.

Need to design a UI and add some style.

I'd like to avoid typescript so this can be a javascript learning experience.



Colin's ideas:

maybe different buttons for line, or just some kinda hot key for both

highlight points that have been selected

say next step, or what would happen if you clicked, message box

also have like um a you hav elike a point or shape selected at any time, thats a different colour.. a unique colour

end Colin's ideas



Immediate next step:

a line is defined by 2 points
a circle is defined by 2 points so we just need a bool saying whether its a line or a circle


TODO:

- Refactor: Have functions for drawing a circle and drawing a line.
- Move into a seperate js file

-->


<html>
 <head>
 	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="application/javascript">
  	
  	function Point(x , y)
  	{
  		this.X = x;
  		this.Y = y;
  	}

  	function init()
  	{
  		var points = [];

  		var previousPoint = {x:-1, y:-1};
  		var ctx = document.getElementById('canvas').getContext('2d');
  		var drawCircle = false;

  		$(".button").click(function () { drawCircle = true; console.log("true!"); });


  		var draw = function(x, y) {

		  
  			ctx.beginPath();

			var draw = true;

			for (var i = 0; i < points.length; i++)
			{
				if (points[i].x >= x - 5 && points[i].x <= x + 5 && points[i].y >= y - 5 && points[i].y <= y + 5)
				{
					var currentPoint = { x: points[i].x, y: points[i].y };
					draw = false;
					break;
				}
			}

			if (draw)
			{
				points.push( { x: x , y: y } );

				ctx.arc(x,y,5,0,Math.PI*2,true);
			 	ctx.fill();

			 	previousPoint.x = -1;
			 	previousPoint.y = -1;
			}
			else
			{
				if (previousPoint.x != -1)
				{
					if (drawCircle)
					{
						var radius = Math.sqrt((previousPoint.x - currentPoint.x)*(previousPoint.x - currentPoint.x) + (previousPoint.y - currentPoint.y)*(previousPoint.y - currentPoint.y));
						ctx.arc(previousPoint.x, previousPoint.y, radius,0,  Math.PI*2, false);
						ctx.stroke();

						
						drawCircle = false;
					}
					else
					{
						//draw a line between the two
						
						ctx.moveTo(currentPoint.x, currentPoint.y);
						ctx.lineTo(previousPoint.x, previousPoint.y);
						ctx.stroke();
					}
					
					previousPoint.x = -1;
					previousPoint.y = -1;
				}
				else
				{
					previousPoint = {x: x, y: y};
				}
			}

			ctx.closePath();
		
	 	 }

	     $("#canvas").click(function(e)
	     {
	     	draw(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
	     });
    }
  </script>
 </head>
 <body onload="init();">
   <canvas id="canvas" width="400" height="400" style="border: 1px solid black;"></canvas>
   <a class="button" href="#" style="width:50px; height:50px; border: 1px solid black; text-decoration: none;">Circle</a>
 </body>
</html>